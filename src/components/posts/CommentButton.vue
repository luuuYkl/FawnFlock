<!-- ä»çˆ¶ç»„ä»¶ç»§æ‰¿å¯¹åº”postidå¹¶æ˜¾ç¤ºè¯„è®ºæ•°é‡ -->
<!-- æ ¹æ®postidå®ç°è·³è½¬åˆ°PostDetialçš„åŠŸèƒ½ -->

<template>
  <button class="comment-btn">
    <span class="icon">ğŸ’¬</span>
    <span class="count">{{ displayCommentCount }}</span>
  </button>
</template>

<script>
export default {
  props: {
    initialCommentCount: {
      type: Number,
      default: 0 // é»˜è®¤å€¼ä¸º 0
    },
    postId: {
      type: Number,
      required: true // å¿…é¡»ä¼ å…¥ postId
    }
  },

  data() {
    return {
      // ä½¿ç”¨ä¼ å…¥çš„åˆå§‹è¯„è®ºæ•°ä½œä¸ºè¯„è®ºæ•°
      commentCount: this.initialCommentCount
    };
  },

  computed: {
    // è®¡ç®—å±æ€§ï¼Œæ ¹æ®è¯„è®ºæ•°è¿”å›åˆé€‚çš„æ˜¾ç¤ºæ ¼å¼
    displayCommentCount() {
      return this.commentCount > 999 ? '999+' : this.commentCount;
    }
  },

  created() {
    // æ£€æŸ¥æ˜¯å¦æ¥æ”¶åˆ°æ‰€éœ€çš„ propsï¼Œå¹¶è®°å½•é”™è¯¯
    if (this.postId === undefined) {
      console.error('postId æœªå®šä¹‰ï¼Œè¯·ç¡®ä¿ä»çˆ¶ç»„ä»¶ä¼ é€’äº† postId');
    }
    if (this.initialCommentCount === undefined) {
      console.error('initialCommentCount æœªå®šä¹‰ï¼Œè¯·ç¡®ä¿ä»çˆ¶ç»„ä»¶ä¼ é€’äº† initialCommentCount');
    }
  },

  // methods: {
  //   // è·³è½¬åˆ°å¸–å­è¯¦æƒ…é¡µçš„æ–¹æ³•
  //   navigateToPostDetail() {
  //     if (this.postId) {
  //       this.$router.push({ name: 'PostDetail', params: { postId: this.postId } });
  //     } else {
  //       console.error('æ— æ³•è·³è½¬åˆ°è¯¦æƒ…é¡µé¢ï¼ŒpostId æœªå®šä¹‰');
  //     }
  //   }
  // }
};
</script>

<style scoped>
.comment-btn {
  display: inline-flex;
  align-items: center;
  gap: var(--spacing-xs);
  padding: 8px 16px;
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius-lg);
  background: var(--bg-primary);
  color: var(--text-secondary);
  font-size: var(--font-size-sm);
  cursor: pointer;
  transition: all var(--transition-base);
  user-select: none;
}

.comment-btn:hover {
  border-color: var(--primary-color);
  color: var(--primary-color);
  background: rgba(102, 126, 234, 0.05);
}

.comment-btn .icon {
  font-size: 16px;
  line-height: 1;
}

.comment-btn .count {
  font-weight: var(--font-weight-semibold);
}
</style>
